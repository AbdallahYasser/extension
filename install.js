(function(){function y(e,f){e='<select name="'+e+'" style="display:inline-block; width:300px; font-size:15px;height: 30px; border-radius: 15px;padding: 0px 10px; border:1px solid #ccc;">';let a=Object.keys(g.codes);for(let b=0;b<a.length;b++)e=f==a[b]?e+('<option value="'+a[b]+'" selected="selected">'+g.codes[a[b]].enName+" ("+g.codes[a[b]].nativeName+")</option>"):e+('<option value="'+a[b]+'">'+g.codes[a[b]].enName+" ("+g.codes[a[b]].nativeName+")</option>");return e}var p={ja:'<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002</p><p>\u521d\u3081\u306b\u3001<a href="https://www.subtitlesfll.com/privacy_policy" target="_blank" rel=\u201dnoopener\u201d>\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u30dd\u30ea\u30b7\u30fc\u3001\u5229\u7528\u898f\u7d04</a>\u3092\u304a\u8aad\u307f\u3044\u305f\u3060\u304d\u3001<br>\u540c\u610f\u3057\u3066\u9802\u3051\u307e\u3057\u305f\u3089\u3001\u521d\u671f\u8a2d\u5b9a\u3092\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>',
"default":'<p>Thank you for installing.</p><p>Please read <a href="https://www.subtitlesfll.com/privacy_policy" target="_blank" rel=\u201dnoopener\u201d>Privacy Policy & Terms of Service</a> first.<br>If you agree, please make the initial settings.</p>'},k={ja:"\u3042\u306a\u305f\u306e\u4f7f\u7528\u8a00\u8a9e","default":"Your native language."},q={ja:"\u5b66\u7fd2\u3057\u305f\u3044\u8a00\u8a9e","default":"Your learning language."},r={ja:"\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u8a9e\u5b66\u5b66\u7fd2\u3092\u304a\u697d\u3057\u307f\u304f\u3060\u3055\u3044\uff01",
"default":"Thank you!<br>Please enjoy learning language!"};const z={ja:"\u5229\u7528\u3059\u308bAmazon","default":"Your Amazon"};var t={ja:"\u300c\u4f7f\u7528\u8a00\u8a9e\u300d\u3068\u300c\u5b66\u7fd2\u3057\u305f\u3044\u8a00\u8a9e\u300d\u3092\u540c\u3058\u306b\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002","default":"You can not select the same language."},l={ja:"\u30d7\u30e9\u30a4\u30e0\u30d3\u30c7\u30aa\u306e\u30da\u30fc\u30b8\u3078","default":"Go to Prime Video"},m={ja:"Amazon\u3078\u623b\u308b",
"default":"Back to Amazon"};const A={ja:"\u898f\u7d04\u306b\u540c\u610f\u3057\u3001\u4fdd\u5b58","default":"Accept the terms and Save"},B=new SubtitlesForLLCommon;var d=(window.navigator.languages&&window.navigator.languages[0]||window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage).toLowerCase();let n=function(){let e={};if(location.search&&0<location.search.length){let f=location.search.substring(1).split("&");for(let a=0;a<f.length;a++){let b=f[a].split("=");
e[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}}return e}(),h=new SubtitlesForLLAmazon,g=new SubtitlesForLLLanguageCode;p=p[d]||p.default;k=k[d]||k.default;q=q[d]||q.default;let F=r[d]||r.default;r=z[d]||z.default;let G=t[d]||t.default,H=l[d]||l.default,I=m[d]||m.default;t=A[d]||A.default;document.getElementById("main_message").innerHTML=p;let C=document.getElementById("amazon_region_selector_container");l='<span style="display:inline-block; width:150px; margin-right:10px; text-align:left;">'+
r+"</span>";m=null;n.ref&&(m=(new URL(decodeURIComponent(n.ref))).hostname);l+=function(e,f){let a='<select name="amazonRegion" style="display:inline-block; width:300px; font-size:15px;height: 30px; border-radius: 15px;padding: 0px 10px; border:1px solid #ccc;">',b=null;if(f&&f!=h.WWW_PRIMEVIDEO_COM)for(let c=0;c<h.hostnames.length;c++)if(h.hostnames[c].hostname==f){b=f;break}null==b&&(b=h.hostnameByBlowserLang(e));h.hostnames.forEach((c,u)=>{a=c.hostname==b||u==h.hostnames.length-1&&null==b?a+('<option value="'+
c.hostname+'" selected="selected">'+c.country+" - "+c.hostname+(c.hostname!=c.primeHostname?" ("+c.primeHostname+")":"")+"</option>"):a+('<option value="'+c.hostname+'">'+c.country+" - "+c.hostname+(c.hostname!=c.primeHostname?" ("+c.primeHostname+")":"")+"</option>")});return a}(d,m);C.insertAdjacentHTML("afterbegin",l);d=g.codes[d]?d:g.codes[d.replace(/-.+$/m,"")]?d.replace(/-.+$/m,""):"en";k='<span style="display:inline-block; width:150px; margin-right:10px; text-align:left;">'+k+"</span>"+y("nativeLanguage",
d);let w=document.getElementById("native_language_selector_container");w.innerHTML=k;w.style.cssText="margin:20px;";d='<span style="display:inline-block; width:150px; margin-right:10px; text-align:left;">'+q+"</span>"+y("learningLanguage","en"!=d?"en":"ja");let x=document.getElementById("learning_language_selector_container");x.innerHTML=d;x.style.cssText="margin:20px;";let v=document.getElementById("ok_button");v.innerText=t;v.onclick=e=>{var f=w.getElementsByTagName("select")[0];e=x.getElementsByTagName("select")[0];
let a=C.getElementsByTagName("select")[0];f=f.value;e=e.value;if(f==e)alert(G);else{v.innerText="Please wait...";var b={nativeLanguage:f,learningLanguage:e,amazonRegion:a.value};B.waitForLaunchingServiceWorker(()=>{let c=chrome.runtime.connect({name:"Subtitles for Language Learning (Prime Video)"});c.onMessage.addListener(u=>{v.remove();u=document.getElementById("contents_container");let D=H;n.ref&&(D=I);let E;E=null==n.ref?h.primeVideoStoreFrontURL(a.value):(new URL(decodeURIComponent(n.ref))).href;
u.innerHTML='<div style="display:flex; flex-direction:column; width:100%; height:100%;"><div style="display:block; align-items:center; margin:auto;"><p>'+F+'</p></div><div><a class="close_a" href="'+E+'"><div class="close_div" style="padding:0px 20px; display:table-cell; vertical-align:middle; user-select:none;"><span style="">'+D+"</span></div></a></div></div>"});c.postMessage({type:"installed",configs:b})})}};setInterval(()=>{B.waitForLaunchingServiceWorker(()=>{})},2E4)})();
